<ng-template let-popup let-context="context" #deleteWordTemplate>
  <div class="delete-word-confirm">
    <div>Are you sure?</div>
    <a (click)="popup.close(); deleteWord(context.word)">Yes</a>
    <a (click)="popup.close()">No</a>
  </div>
</ng-template>

<nz-spin [nzSpinning]="loading">
  <div class="search">
    <nz-input-group nzCompact>
      <input type="text" nz-input placeholder="Search"
        [(ngModel)]="search" (keyup.enter)="getWords()"/>
      <button nz-button (click)="getWords()">
        <i nz-icon type="search"></i>
      </button>
    </nz-input-group>
  </div>

  <nz-table #wordsTable nzSize="middle" nzBordered
    [nzData]="words"
    [nzFrontPagination]="false"
    [nzTotal]="paging.total"
    [nzPageSize]="paging.pageSize"
    [(nzPageIndex)]="paging.page"
    (nzPageIndexChange)="getWords()">
    <thead>
      <tr>
        <th>Word</th>
        <th>Translation</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let word of wordsTable.data">
        <td>{{word.text}}</td>
        <td>{{word.translation}}</td>
        <td class="word-actions">
          <nz-button-group>
            <a nz-button nzSize="small" title="Open in Google Translate"
              target="_blank" [href]="word.googleTranslateLink">
              <i nz-icon type="google"></i>
            </a>
            <a nz-button nzSize="small" title="Open in Google Images"
              target="_blank" [href]="word.googleImagesLink">
              <i nz-icon type="search"></i>
            </a>
            <button nz-button nzSize="small" title="Edit word" (click)="wordEditCmp.openModal(word)">
              <i nz-icon type="edit"></i> 
            </button>
            <button nz-button nzSize="small" title="Delete word"
              nz-popconfirm
              nzTitle="Are you sure?"
              (nzOnConfirm)="deleteWord(word)"
              nzPlacement="topRight"
              nzOkText="Yes" nzCancelText="No">
              <i nz-icon type="delete"></i> 
            </button>
          </nz-button-group>
        </td>
      </tr>
    </tbody>
  </nz-table>

  <div class="add-word">
    <button nz-button (click)="wordCreateCmp.openModal()">
      <i nz-icon nzType="plus-circle"></i> Add word(s)
    </button>
  </div>
</nz-spin>

<v-word-edit #wordEditCmp (complete)="editComplete($event)"></v-word-edit>
<v-word-create #wordCreateCmp (complete)="getWords()"></v-word-create>